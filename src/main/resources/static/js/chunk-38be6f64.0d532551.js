(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38be6f64"],{"14ac":function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"search-bar"},[a("div",{staticClass:"back",on:{click:t.back}}),a("div",{staticClass:"search-input"},[a("form",{attrs:{action:""},on:{submit:t.submit,keydown:t.keydown}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputVal,expression:"inputVal"}],attrs:{type:"search"},domProps:{value:t.inputVal},on:{input:[function(i){i.target.composing||(t.inputVal=i.target.value)},function(i){return t.inputHandle(t.vm,i)}]}})]),a("span",{staticClass:"clear",on:{click:t.clear}})]),t._t("default")],2)},n=[],s=(a("498a"),function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=0;return function(){for(var e=this,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];a&&clearTimeout(a),a=setTimeout((function(){t.apply(e,s)}),i)}}),o={props:{initVal:{type:String,default:""}},data:function(){return{vm:this,inputVal:""}},mounted:function(){this.inputVal=this.initVal},methods:{inputHandle:s((function(t,i){var a=i.target.value.trim();t.$emit("searchVal",a)}),500),back:function(){this.$router.go(-1)},submit:function(t){t.preventDefault()},keydown:function(t){13===t.keyCode&&(t.preventDefault(),this.$emit("keyboardSearch"))},clear:function(){this.inputVal="",this.$emit("searchVal","")}}},c=o,r=(a("871d"),a("2877")),l=Object(r["a"])(c,e,n,!1,null,"5a463960",null);i["a"]=l.exports},"1dde":function(t,i,a){var e=a("d039"),n=a("b622"),s=a("2d00"),o=n("species");t.exports=function(t){return s>=51||!e((function(){var i=[],a=i.constructor={};return a[o]=function(){return{foo:1}},1!==i[t](Boolean).foo}))}},4532:function(t,i,a){"use strict";var e=a("f571"),n=a.n(e);n.a},"51f4":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"search-result"},[e("div",{staticClass:"fixed"},[e("SearchBar",{attrs:{initVal:t.initVal},on:{searchVal:t.searchVal}}),e("div",{staticClass:"tab"},t._l(["视图","文章"],(function(i,a){return e("div",{key:a,class:["item",t.activeIndex===a?"active":""],on:{click:function(i){return t.changeTab(a)}}},[t._v(" "+t._s(i)+" "),e("i")])})),0)],1),e("div",{staticClass:"content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.activeIndex,expression:"activeIndex === 0"}]},[t._l(t.viewList,(function(i){return e("div",{key:i.moduleid,staticClass:"result-app-item",on:{click:function(a){return t.toDetail(i.url,i.modulename,i.moduleid,"view")}}},[e("img",{attrs:{src:i.image,alt:""}}),e("div",{staticClass:"result-content"},[e("h4",[t._v(t._s(i.modulename))]),e("p",[t._v(t._s(i.description))]),e("span",[t._v(t._s(i.fangwenTel))])])])})),t.isLoadingShow?e("img",{staticClass:"loading",attrs:{src:a("12ae"),alt:""}}):t._e(),0!==t.viewList.length||t.isLoadingShow?t._e():e("h6",{staticClass:"empty"},[t._v("空空如也")])],2),e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activeIndex,expression:"activeIndex === 1"}]},[t._l(t.articleList,(function(i,a){return e("div",{key:i.activityid,staticClass:"result-article-item"},[e("h3",{on:{click:function(a){return t.toDetail(i.textpath,i.textname,i.moduleid)}}},[t._v(t._s(i.textname))]),e("h5",{on:{click:function(a){return t.toDetail(i.textpath,i.textname,i.moduleid)}}},[t._v(t._s(i.authorname)+" "+t._s(i.createTime))]),e("div",{staticClass:"text-img",on:{click:function(a){return t.toDetail(i.textpath,i.textname,i.moduleid)}}},[e("p",[t._v(t._s(i.brief))]),e("img",{attrs:{src:i.imagename,alt:""}})]),e("div",{staticClass:"handle"},[e("span",{class:["zan",i.dianzan?"zanActive":""],on:{click:function(e){return t.zanHandle(i.activityid,a)}}},[t._v(t._s(i.dianzanliang?i.dianzanliang:"点赞"))]),e("span",{class:["collection",i.shoucang?"collectionActive":""],on:{click:function(e){return t.collectionHandle(i.activityid,a)}}},[t._v(t._s(i.shoucangliang?i.shoucangliang:"收藏"))])])])})),t.isLoadingShow?e("img",{staticClass:"loading",attrs:{src:a("12ae"),alt:""}}):t._e(),0!==t.articleList.length||t.isLoadingShow?t._e():e("h6",{staticClass:"empty"},[t._v("空空如也")])],2)])])},n=[],s=(a("99af"),a("4160"),a("d3b7"),a("159b"),a("e7e5"),a("d399")),o=a("c1df"),c=a.n(o),r=a("14ac"),l={name:"SearchResult",components:{SearchBar:r["a"]},data:function(){return{initVal:this.$route.query.value,activeIndex:0,inputVal:"",viewList:[],articleList:[],isLoadingShow:!1}},created:function(){},mounted:function(){this.searchVal(this.initVal),this.activeIndex=this.$route.query.isArticle?1:0},methods:{searchVal:function(t){var i=this;this.inputVal=t,this.inputVal&&(this.isLoadingShow=!0,this.isEmptyShow=!1,this.viewList=[],this.articleList=[],this.$axios.post("/hopeModule/searchModuleByNameSec",{name:this.inputVal,aamid:this.$store.state.userInfoObj.aamid,deptid:this.$store.state.userInfoObj.deptid,odeptid:this.$store.state.userInfoObj.odeptid}).then((function(t){if(i.isLoadingShow=!1,200===t.status&&"000000"===t.data.status){var a=t.data.data||[],e=a.module.list[1].styleList||[],n=a.module.list[0].styleList||[],s=a.article.list[1].styleList||[],o=a.article.list[0].styleList||[];i.viewList=e.concat(n),i.articleList=s.concat(o),i.articleList.forEach((function(t){t.createTime=t.timeori?c()(t.timeori).format("YYYY/MM/DD HH:mm:ss"):""}))}else i.isEmptyShow=!0})).catch((function(t){i.isLoadingShow=!1,i.isEmptyShow=!0})))},zanHandle:function(t,i){var a=this,e=this.articleList[i].dianzanliang;s["a"].loading({message:"请稍后...",forbidClick:!0}),this.$axios.post("/hopeActivity/commendhopeActivity",{activityid:t,aamid:this.$store.state.userInfoObj.aamid,viewtime:new Date,liked:1}).then((function(t){s["a"].clear(),200===t.status&&"000000"===t.data.status?(a.articleList[i].dianzan=!0,a.articleList[i].dianzanliang=e+1):s["a"].fail("请重试")})).catch((function(t){s["a"].clear(),s["a"].fail("请重试")}))},collectionHandle:function(t,i){var a=this,e=this.articleList[i].shoucang,n=this.articleList[i].shoucangliang,o=e?"deleteCollActivi":"colletcthopeActivity",c=e?{aamid:this.$store.state.userInfoObj.aamid,activityid:t}:{activityid:t,aamid:this.$store.state.userInfoObj.aamid,activitysequence:new Date,favortype:1};s["a"].loading({message:"请稍后...",forbidClick:!0}),this.$axios.post("/hopeActivity/".concat(o),c).then((function(t){var o;(s["a"].clear(),200===t.status&&"000000"===t.data.status)?(a.articleList[i].shoucang=!e,o=e?n-1:n+1,a.articleList[i].shoucangliang=o):s["a"].fail("请重试")})).catch((function(t){s["a"].clear(),s["a"].fail("请重试")}))},saveHistory:function(t){var i=this;return new Promise((function(a,e){i.$axios.post("/hopeSearchHistory/insertSearchRecord",{aamid:i.$store.state.userInfoObj.aamid,searchtext:t,logtime:new Date}).then((function(t){200===t.status&&"000000"===t.data.status?a():e()})).catch((function(t){e()}))}))},saveFootprint:function(t){var i=this;return new Promise((function(a,e){i.$axios.post("/hopeUserLog_h/insertUserLog_h",{aamid:i.$store.state.userInfoObj.aamid,moduleid:t,logtime:Date.parse(new Date)}).then((function(t){200===t.status&&"000000"===t.data.status?a():e()})).catch((function(t){e()}))}))},toDetail:function(t,i,a,e){var n=this;s["a"].loading({message:"请稍后...",forbidClick:!0}),e?this.saveFootprint(a).then((function(){n.saveHistory(i).then((function(){window.location.href=t})).catch((function(){window.location.href=t}))})).catch((function(){n.saveHistory(i).then((function(){window.location.href=t})).catch((function(){window.location.href=t}))})):this.saveHistory(i).then((function(){window.location.href=t})).catch((function(){window.location.href=t}))},changeTab:function(t){this.activeIndex=t}}},u=l,d=(a("4532"),a("2877")),h=Object(d["a"])(u,e,n,!1,null,"1b73e6e2",null);i["default"]=h.exports},"72dc":function(t,i,a){},8418:function(t,i,a){"use strict";var e=a("c04e"),n=a("9bf2"),s=a("5c6c");t.exports=function(t,i,a){var o=e(i);o in t?n.f(t,o,s(0,a)):t[o]=a}},"871d":function(t,i,a){"use strict";var e=a("72dc"),n=a.n(e);n.a},"99af":function(t,i,a){"use strict";var e=a("23e7"),n=a("d039"),s=a("e8b5"),o=a("861d"),c=a("7b0b"),r=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),h=a("b622"),f=a("2d00"),v=h("isConcatSpreadable"),m=9007199254740991,p="Maximum allowed index exceeded",g=f>=51||!n((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),w=d("concat"),y=function(t){if(!o(t))return!1;var i=t[v];return void 0!==i?!!i:s(t)},b=!g||!w;e({target:"Array",proto:!0,forced:b},{concat:function(t){var i,a,e,n,s,o=c(this),d=u(o,0),h=0;for(i=-1,e=arguments.length;i<e;i++)if(s=-1===i?o:arguments[i],y(s)){if(n=r(s.length),h+n>m)throw TypeError(p);for(a=0;a<n;a++,h++)a in s&&l(d,h,s[a])}else{if(h>=m)throw TypeError(p);l(d,h++,s)}return d.length=h,d}})},f571:function(t,i,a){}}]);
//# sourceMappingURL=chunk-38be6f64.0d532551.js.map