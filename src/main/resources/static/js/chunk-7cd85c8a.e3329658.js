(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cd85c8a"],{"7d55":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"search"},[e("SearchBar",{on:{searchVal:t.searchVal}},[e("span",{staticClass:"edit-btn",on:{click:t.editHandle}},[t._v("编辑")])]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.isEmpty,expression:"isEmpty"}],staticClass:"empty-tip"},[t._v("搜索结果为空")]),e("div",{staticClass:"content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.cloneData.img,expression:"cloneData.img"}],staticClass:"clone",class:[t.isTreans?"opacity0":""],style:{left:t.cloneData.left+"px",top:t.cloneData.top+"px",transform:t.isTreans?"translate3d("+t.cloneData.transX+"px, "+t.cloneData.transY+"px, 0)":""}},[e("img",{attrs:{src:t.cloneData.img,alt:""}}),e("h5",[t._v(t._s(t.cloneData.title))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isContentShow,expression:"isContentShow"}],staticClass:"app-wrapper"},[e("section",[e("h4",[t._v("我的关注")]),0===t.myAppList.length?e("p",{staticClass:"tip"},[t._v("点击“编辑”按钮可以添加关注的视图")]):t._e(),e("ul",{staticClass:"myapp-list",staticStyle:{"border-bottom":"1px solid #EAEAEA"}},[e("vuedraggable",t._b({attrs:{delay:100},model:{value:t.myAppList,callback:function(i){t.myAppList=i},expression:"myAppList"}},"vuedraggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition"}},t._l(t.myAppList,(function(i,s){return e("li",{key:s,class:[t.isCanEdit?"showBorder":"",t.delIndex===s?"trans":"","myapp-item"],on:{click:function(e){return t.toViewDetail(i.url)}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.isCanEdit,expression:"isCanEdit"}],staticClass:"add-btn",on:{click:function(i){return i.stopPropagation(),t.delApp(s)}}}),e("img",{attrs:{src:i.icon,alt:""}}),e("h5",[t._v(t._s(i.modulename))])])})),0)],1)],1)]),e("section",[e("h4",[t._v("更多应用")]),e("ul",{staticClass:"more-list"},[e("vuedraggable",t._b({attrs:{sort:!1,handle:".del-btn"},model:{value:t.moreAppList,callback:function(i){t.moreAppList=i},expression:"moreAppList"}},"vuedraggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition"}},t._l(t.moreAppList,(function(i,s){return e("li",{key:s,class:[t.isCanEdit?"showBorder":"",s>3?"margin":"",t.addIndex===s?"trans":""],on:{click:function(e){return t.toViewDetail(i.url)}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.isCanEdit,expression:"isCanEdit"}],staticClass:"del-btn",on:{click:function(i){return i.stopPropagation(),t.addApp(s,i)}}}),e("img",{attrs:{src:i.icon,alt:""}}),e("h5",[t._v(t._s(i.modulename))])])})),0)],1)],1)])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCanEdit,expression:"isCanEdit"}],staticClass:"handle-bar"},[e("div",{staticClass:"cancel btn",on:{click:t.cancel}},[t._v("取消")]),e("div",{staticClass:"done btn",on:{click:t.complete}},[t._v("完成")])])])],1)},n=[],a=(e("c740"),e("4160"),e("c975"),e("a434"),e("159b"),e("e7e5"),e("d399")),o=e("2909"),r=e("310e"),c=e.n(r),p=e("14ac"),l=(document.documentElement.getBoundingClientRect().width,{name:"Search",components:{SearchBar:p["a"],vuedraggable:c.a},data:function(){return{inputVal:"",isContentShow:!1,isHistoryShow:!0,delIndex:-1,addIndex:-1,isTreans:!1,isCanEdit:!1,myAppList:[],moreAppList:[],originMyAppList:[],originMoreAppList:[],cloneData:{},selectId:[],isEmpty:!1}},created:function(){},mounted:function(){var t=this.$route.params.selectId,i=void 0===t?[]:t;this.selectId=i},computed:{dragOptions:function(){return{animation:300,group:"description",ghostClass:"ghost"}}},methods:{searchVal:function(t){var i=this,e=this.$route.params.allList,s=void 0===e?[]:e;this.inputVal=t,this.inputVal&&(s.forEach((function(t){-1!==t.modulename.indexOf(i.inputVal)&&(i.isContentShow=!0,"01"===t.wstatus?i.myAppList.push(t):i.moreAppList.push(t))})),this.originMyAppList=Object(o["a"])(this.myAppList),this.originMoreAppList=Object(o["a"])(this.moreAppList),0===this.myAppList.length&&0===this.moreAppList.length&&(this.isContentShow=!1,this.isEmpty=!0))},editHandle:function(){0===this.moreAppList.length&&0===this.myAppList.length||(this.isCanEdit=!0)},addApp:function(t,i){var e=this,s=i.currentTarget.parentNode,n=this.myAppList.length>0?document.querySelectorAll(".myapp-item")[this.myAppList.length-1]:void 0,a=this.moreAppList[t],o=i.currentTarget.parentNode.getBoundingClientRect(),r=this.myAppList.length%4===0;n&&(r||(n.offsetLeft,o.width)),n&&(r?(n.offsetTop,o.height):n.offsetTop);this.addIndex=t,this.cloneData={img:a.icon,title:a.title,left:s.offsetLeft,top:s.offsetTop,transX:0-s.offsetLeft,transY:o.height-1-s.offsetTop},setTimeout((function(){e.isTreans=!0})),setTimeout((function(){e.addIndex=-1,e.moreAppList.splice(t,1),e.myAppList.unshift(a),e.selectId.unshift(a.moduleid),setTimeout((function(){e.cloneData={},e.isTreans=!1}),400)}),400)},delApp:function(t){var i=this;this.delIndex=t;var e=this.myAppList[t],s=this.selectId.findIndex((function(t){return t===e.moduleid}));this.selectId.splice(s,1),setTimeout((function(){i.delIndex=-1,i.myAppList.splice(t,1),i.moreAppList.push(e)}),300)},toViewDetail:function(t){t?window.location.href=t:a["a"].fail("缺失跳转链接")},complete:function(){var t=this;a["a"].loading({message:"请稍后...",forbidClick:!0}),this.$axios.post("/hopeModule/editModuleSubV2",{aamid:this.$store.state.userInfoObj.aamid,addModules:this.selectId.reverse()}).then((function(i){200===i.status&&"000000"===i.data.status?(a["a"].clear(),a["a"].success("编辑成功"),setTimeout((function(){t.$router.go(-1)}),300)):(a["a"].clear(),a["a"].fail("请重试"))})).catch((function(t){a["a"].clear(),a["a"].fail("请重试")}))},cancel:function(){this.isCanEdit=!1,this.myAppList=this.originMyAppList,this.moreAppList=this.originMoreAppList}},watch:{inputVal:function(t){""===t&&(this.isEmpty=!1)}}}),d=l,u=(e("b86e"),e("2877")),h=Object(u["a"])(d,s,n,!1,null,"5f8788d6",null);i["default"]=h.exports},b86e:function(t,i,e){"use strict";var s=e("bba6"),n=e.n(s);n.a},bba6:function(t,i,e){},c740:function(t,i,e){"use strict";var s=e("23e7"),n=e("b727").findIndex,a=e("44d2"),o=e("ae40"),r="findIndex",c=!0,p=o(r);r in[]&&Array(1)[r]((function(){c=!1})),s({target:"Array",proto:!0,forced:c||!p},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(r)},c975:function(t,i,e){"use strict";var s=e("23e7"),n=e("4d64").indexOf,a=e("a640"),o=e("ae40"),r=[].indexOf,c=!!r&&1/[1].indexOf(1,-0)<0,p=a("indexOf"),l=o("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:c||!p||!l},{indexOf:function(t){return c?r.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-7cd85c8a.e3329658.js.map