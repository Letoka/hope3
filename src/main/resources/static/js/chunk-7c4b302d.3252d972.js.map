{"version":3,"sources":["webpack:///./src/views/Search/Search.vue?805c","webpack:///./src/views/Search/Search.vue?53c8","webpack:///src/views/Search/Search.vue","webpack:///./src/views/Search/Search.vue?49aa","webpack:///./src/views/Search/Search.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","domProps","on","$event","target","composing","applyVal","_v","submitApply","isDialogShow","searchVal","keyboardSearch","toSearchResultPage","inputVal","length","isEmptyShow","searchViewResultList","isLoadingShow","_m","_l","item","index","key","toLink","_s","text","type","image","quanxianC","searchMoreViewResultList","isShowMore","showMore","class","_e","searchArticleResultList","isHistoryShow","searchHistoryList","hideHistory","clickToResult","searchtext","staticRenderFns","components","SearchBar","data","searchHotList","created","mounted","getHistory","getHot","methods","val","$axios","post","$store","state","userInfoObj","aamid","deptid","viewKeyList","forEach","articleKeyList","viewTableList","articleTableList","i","keyname","replace","textname","$router","push","window","location","href","path","component"],"mappings":"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","file":"js/chunk-7c4b302d.3252d972.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=6f59b618&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=6f59b618&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDialogShow),expression:\"isDialogShow\"}],staticClass:\"apply-dialog\"},[_c('div',{staticClass:\"dialog\"},[_c('div',{staticClass:\"input\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.applyVal),expression:\"applyVal\"}],attrs:{\"maxlength\":\"30\",\"placeholder\":\"如申请开通视图权限，请输入开通理由\"},domProps:{\"value\":(_vm.applyVal)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.applyVal=$event.target.value}}}),_c('span',[_vm._v(\"30字以内\")])]),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.submitApply}},[_vm._v(\"提交\")]),_c('div',{staticClass:\"close\",on:{\"click\":function($event){_vm.isDialogShow = false}}})])]),_c('SearchBar',{on:{\"searchVal\":_vm.searchVal,\"keyboardSearch\":_vm.keyboardSearch}},[_c('div',{staticClass:\"search-btn\",on:{\"click\":_vm.toSearchResultPage}},[_vm._v(\"搜索\")])]),_c('div',{staticClass:\"content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.inputVal.length > 0),expression:\"inputVal.length > 0\"}],staticClass:\"search-list\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoadingShow),expression:\"isLoadingShow\"}],staticClass:\"loading\"},[_c('img',{attrs:{\"src\":require(\"../../assets/images/loading.gif\"),\"alt\":\"\"}}),_c('p',[_vm._v(\"搜索中...\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEmptyShow && _vm.searchViewResultList.length === 0),expression:\"isEmptyShow && searchViewResultList.length === 0\"}],staticClass:\"empty\"},[_vm._v(\"搜索结果为空\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoadingShow),expression:\"!isLoadingShow\"}],staticClass:\"search-result\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchViewResultList.length),expression:\"searchViewResultList.length\"}],staticClass:\"view\"},[_vm._m(0),_c('ul',_vm._l((_vm.searchViewResultList),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.toLink(_vm.searchViewResultList[index], 'view')}}},[_c('span',{staticClass:\"left\"},[_c('span',{staticClass:\"text\",domProps:{\"innerHTML\":_vm._s(item.text)}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.type !== 'keyWord'),expression:\"item.type !== 'keyWord'\"}],attrs:{\"src\":item.image,\"alt\":\"\"}})]),_c('span',{staticClass:\"auth\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.type === 'keyWord'),expression:\"item.type === 'keyWord'\"}],staticClass:\"key-icon\"},[_vm._v(\"关键字\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.quanxianC === 0),expression:\"item.quanxianC === 0\"}]},[_vm._v(\" {无权限}\")])])])}),0),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchMoreViewResultList.length && _vm.isShowMore),expression:\"searchMoreViewResultList.length && isShowMore\"}]},_vm._l((_vm.searchMoreViewResultList),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.toLink(_vm.searchMoreViewResultList[index], 'view')}}},[_c('span',{staticClass:\"left\"},[_c('span',{staticClass:\"text\",domProps:{\"innerHTML\":_vm._s(item.text)}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.type !== 'keyWord'),expression:\"item.type !== 'keyWord'\"}],attrs:{\"src\":item.image,\"alt\":\"\"}})]),_c('span',{staticClass:\"auth\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.type === 'keyWord'),expression:\"item.type === 'keyWord'\"}],staticClass:\"key-icon\"},[_vm._v(\"关键字\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.quanxianC === 0),expression:\"item.quanxianC === 0\"}]},[_vm._v(\" {无权限}\")])])])}),0)]),(_vm.searchMoreViewResultList.length)?_c('div',{staticClass:\"more\",on:{\"click\":_vm.showMore}},[_vm._v(\" \"+_vm._s(_vm.isShowMore ? '收起' : '更多')+\" \"),_c('img',{class:[_vm.isShowMore ? 'roate' : ''],attrs:{\"src\":require(\"../../assets/images/icon_show@2x.png\"),\"alt\":\"\"}})]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchArticleResultList.length),expression:\"searchArticleResultList.length\"}],staticClass:\"article\"},[_vm._m(1),_c('ul',_vm._l((_vm.searchArticleResultList),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.toLink(_vm.searchArticleResultList[index], 'article')}}},[_c('span',{staticClass:\"left\"},[_c('span',{staticClass:\"text\",domProps:{\"innerHTML\":_vm._s(item.text)}})]),_c('span',{staticClass:\"auth\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.type === 'keyWord'),expression:\"item.type === 'keyWord'\"}],staticClass:\"key-icon\"},[_vm._v(\"关键字\")])])])}),0)])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.inputVal.length === 0),expression:\"inputVal.length === 0\"}],staticClass:\"history-hot\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isHistoryShow && _vm.searchHistoryList.length),expression:\"isHistoryShow && searchHistoryList.length\"}],staticClass:\"history\"},[_c('span',{staticClass:\"delete-btn\",on:{\"click\":_vm.hideHistory}}),_c('h4',[_vm._v(\"历史搜索\")]),_c('ul',_vm._l((_vm.searchHistoryList),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.clickToResult(item.searchtext)}}},[_vm._v(_vm._s(item.searchtext))])}),0)]),_c('div',{staticClass:\"hot\"},[_c('h4',[_vm._v(\"热门搜索\")]),_c('ul',_vm._l((_vm.searchHotList),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.clickToResult(item.searchtext)}}},[_vm._v(_vm._s(item.searchtext))])}),0)])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h5',[_c('i'),_vm._v(\"相关视图\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h5',[_c('i'),_vm._v(\"相关文章\")])}]\n\nexport { render, staticRenderFns }","<!-- 搜索页 -->\r\n<template>\r\n  <div class=\"search\">\r\n    <div class=\"apply-dialog\" v-show=\"isDialogShow\">\r\n      <div class=\"dialog\">\r\n        <div class=\"input\">\r\n          <textarea v-model=\"applyVal\" maxlength=\"30\" placeholder=\"如申请开通视图权限，请输入开通理由\"></textarea>\r\n          <span>30字以内</span>\r\n        </div>\r\n        <div class=\"btn\" @click=\"submitApply\">提交</div>\r\n        <div class=\"close\" @click=\"isDialogShow = false\"></div>\r\n      </div>\r\n    </div>\r\n    <SearchBar @searchVal=\"searchVal\" @keyboardSearch=\"keyboardSearch\" >\r\n      <div class=\"search-btn\" @click=\"toSearchResultPage\">搜索</div>\r\n    </SearchBar>\r\n    <div class=\"content\">\r\n      <div class=\"search-list\" v-show=\"inputVal.length > 0\">\r\n        <div class=\"loading\" v-show=\"isLoadingShow\">\r\n          <img src=\"../../assets/images/loading.gif\" alt />\r\n          <p>搜索中...</p>\r\n        </div>\r\n        <div class=\"empty\" v-show=\"isEmptyShow && searchViewResultList.length === 0\">搜索结果为空</div>\r\n        <div class=\"search-result\" v-show=\"!isLoadingShow\">\r\n          <div class=\"view\" v-show=\"searchViewResultList.length\">\r\n            <h5><i />相关视图</h5>\r\n            <ul>\r\n              <li v-for=\"(item, index) in searchViewResultList\" :key=\"index\" @click=\"toLink(searchViewResultList[index], 'view')\">\r\n                <span class=\"left\">\r\n                  <span class=\"text\" v-html=\"item.text\"></span>\r\n                  <img v-show=\"item.type !== 'keyWord'\" :src=\"item.image\" alt=\"\">\r\n                </span>\r\n                <span class=\"auth\">\r\n                  <span v-show=\"item.type === 'keyWord'\" class=\"key-icon\">关键字</span>\r\n                  <!-- <span v-show=\"item.type === 'keyWord'\">&#8594;&nbsp;{{item.modulename}}</span> -->\r\n                  <span v-show=\"item.quanxianC === 0\">&nbsp;{无权限}</span>\r\n                </span>\r\n              </li>\r\n            </ul>\r\n            <ul v-show=\"searchMoreViewResultList.length && isShowMore\">\r\n              <li v-for=\"(item, index) in searchMoreViewResultList\" :key=\"index\" @click=\"toLink(searchMoreViewResultList[index], 'view')\">\r\n                <span class=\"left\">\r\n                  <span class=\"text\" v-html=\"item.text\"></span>\r\n                  <img v-show=\"item.type !== 'keyWord'\" :src=\"item.image\" alt=\"\">\r\n                </span>\r\n                <span class=\"auth\">\r\n                  <span v-show=\"item.type === 'keyWord'\" class=\"key-icon\">关键字</span>\r\n                  <span v-show=\"item.quanxianC === 0\">&nbsp;{无权限}</span>\r\n                </span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"more\" @click=\"showMore\" v-if=\"searchMoreViewResultList.length\">\r\n            {{isShowMore ? '收起' : '更多'}}\r\n            <img :class=\"[isShowMore ? 'roate' : '']\" src=\"../../assets/images/icon_show@2x.png\" alt=\"\">\r\n          </div>\r\n          <div class=\"article\" v-show=\"searchArticleResultList.length\">\r\n            <h5><i />相关文章</h5>\r\n            <ul>\r\n              <li v-for=\"(item, index) in searchArticleResultList\" :key=\"index\" @click=\"toLink(searchArticleResultList[index], 'article')\">\r\n                <span class=\"left\">\r\n                  <span class=\"text\" v-html=\"item.text\"></span>\r\n                </span>\r\n                <span class=\"auth\">\r\n                  <span v-show=\"item.type === 'keyWord'\" class=\"key-icon\">关键字</span>\r\n                </span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <!-- <ul v-show=\"!isLoadingShow\">\r\n          <li v-for=\"(item, index) in searchResultList\" :key=\"index\" v-html=\"item\"></li>\r\n        </ul> -->\r\n      </div>\r\n      <div class=\"history-hot\" v-show=\"inputVal.length === 0\">\r\n        <div class=\"history\" v-show=\"isHistoryShow && searchHistoryList.length\">\r\n          <span class=\"delete-btn\" @click=\"hideHistory\"></span>\r\n          <h4>历史搜索</h4>\r\n          <ul>\r\n            <li @click=\"clickToResult(item.searchtext)\" v-for=\"(item, index) in searchHistoryList\" :key=\"index\">{{item.searchtext}}</li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"hot\">\r\n          <h4>热门搜索</h4>\r\n          <ul>\r\n            <li @click=\"clickToResult(item.searchtext)\" v-for=\"(item, index) in searchHotList\" :key=\"index\">{{item.searchtext}}</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant';\r\nimport SearchBar from \"../../components/SearchBar\";\r\nexport default {\r\n  name: \"Search\",\r\n  components: {\r\n    SearchBar\r\n  },\r\n  data() {\r\n    return {\r\n      inputVal: \"\",\r\n      applyVal: '',\r\n      isDialogShow: false,\r\n      isLoadingShow: false,\r\n      isEmptyShow: false,\r\n      isHistoryShow: true,\r\n      // allList: [\"交易总览\", \"设计初衷\", \"块级作用域\", \"交通银行\"],\r\n      isShowMore: false,\r\n      searchViewResultList: [],\r\n      searchMoreViewResultList: [],\r\n      searchArticleResultList: [],\r\n      searchHistoryList: [],\r\n      searchHotList: []\r\n    };\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    this.getHistory();\r\n    this.getHot();\r\n  },\r\n  methods: {\r\n    // 获取搜索框值\r\n    searchVal(val) {\r\n      this.inputVal = val;\r\n      this.searchViewResultList = [];\r\n      if (this.inputVal) {\r\n        this.isLoadingShow = true;\r\n        this.isEmptyShow = false;\r\n        const reg = new RegExp(this.inputVal, \"g\");\r\n        this.$axios.post('/hopeModule/searchModuleByName', {\r\n          \"name\": this.inputVal,\r\n          \"aamid\": this.$store.state.userInfoObj.aamid,\r\n          \"deptid\": this.$store.state.userInfoObj.deptid,\r\n\t\t\t\t\t\"odeptid\": this.$store.state.userInfoObj.odeptid\r\n          // aamid: \"010203\",\r\n          // deptid: \"0010101032\",\r\n          // odeptid: \"0010100003\"\r\n        }).then(res => {\r\n        \tthis.isLoadingShow = false;\r\n        \tif (res.status === 200 && res.data.status === '000000') {\r\n            const resData = res.data.data || [];\r\n        \t\tconst viewKeyList = resData.module.list[1].styleList || [];\r\n            const viewTableList = resData.module.list[0].styleList || [];\r\n            const articleKeyList = resData.article.list[1].styleList || [];\r\n            const articleTableList = resData.article.list[0].styleList || [];\r\n            viewKeyList.forEach(item => {\r\n              item.type = 'keyWord';\r\n            });\r\n            articleKeyList.forEach(item => {\r\n              item.type = 'keyWord';\r\n            });\r\n            const showViewList = viewTableList.slice(0, 3).concat(viewKeyList.slice(0, 3));\r\n            const articleList = articleTableList.concat(articleKeyList);\r\n            const moreViewList = viewKeyList.slice(3).concat(viewTableList.slice(3));\r\n\r\n            if (viewKeyList.length === 0 && viewTableList.length === 0 && articleKeyList.length === 0 && articleTableList.length === 0) {\r\n              this.isEmptyShow = true;\r\n              return;\r\n            }\r\n            // 关键字高亮\r\n            this.searchViewResultList = showViewList.map(i => {\r\n              return {\r\n                text: i.type && i.type === 'keyWord' ? i.keyname.replace(\r\n                  reg,\r\n                  \"<span style='color: #45A4B1;'>\" + this.inputVal + \"</span>\"\r\n                ) : i.modulename.replace(\r\n                  reg,\r\n                  \"<span style='color: #45A4B1;'>\" + this.inputVal + \"</span>\"\r\n                ),\r\n                ...i\r\n              };\r\n            });\r\n            this.searchMoreViewResultList = moreViewList.map(i => {\r\n              return {\r\n                text: i.type && i.type === 'keyWord' ? i.keyname.replace(\r\n                  reg,\r\n                  \"<span style='color: #45A4B1;'>\" + this.inputVal + \"</span>\"\r\n                ) : i.modulename.replace(\r\n                  reg,\r\n                  \"<span style='color: #45A4B1;'>\" + this.inputVal + \"</span>\"\r\n                ),\r\n                ...i\r\n              };\r\n            });\r\n            this.searchArticleResultList = articleList.map(i => {\r\n              return {\r\n                text: i.textname.replace(\r\n                  reg,\r\n                  \"<span style='color: #45A4B1;'>\" + this.inputVal + \"</span>\"\r\n                ),\r\n                ...i\r\n              };\r\n            });\r\n        \t} else {\r\n        \t\tthis.isEmptyShow = true;\r\n        \t}\r\n        }).catch(err => {\r\n        \tthis.isLoadingShow = false;\r\n        \tthis.isEmptyShow = true;\r\n        });\r\n      }\r\n    },\r\n    // 点击展示更多\r\n    showMore() {\r\n      this.isShowMore = !this.isShowMore;\r\n    },\r\n    // 跳转到搜索结果页\r\n    toSearchResultPage() {\r\n      this.inputVal && this.$router.push({name: 'SearchResult', query: {value: this.inputVal}});\r\n    },\r\n    // 键盘搜索事件\r\n    keyboardSearch() {\r\n      this.toSearchResultPage();\r\n    },\r\n    // 点击历史/热门去结果页\r\n    clickToResult(text) {\r\n      this.$router.push({name: 'SearchResult', query: {value: text}});\r\n    },\r\n    // 跳转到详情\r\n    toLink(item, type) {\r\n      const path = type === 'view' ? item.url : item.textpath;\r\n      if (item.quanxianC === 0) {\r\n        this.isDialogShow = true;\r\n        return;\r\n      }\r\n      if (item.type === 'keyWord') {\r\n        const value = type === 'article' ? item.textname : item.modulename;\r\n        this.$router.push({name: 'SearchResult', query: { value, isArticle: type === 'article' }});\r\n        return;\r\n      }\r\n      window.location.href = path;\r\n    },\r\n    // 提交申请\r\n    submitApply() {\r\n      const val = this.applyVal.trim();\r\n      if (!val) {\r\n        Toast.fail('请输入开通理由');\r\n        return;\r\n      }\r\n      this.isDialogShow = false;\r\n    },\r\n    // 获取搜索历史\r\n    getHistory() {\r\n      this.$axios\r\n        .post(\"/hopeSearchHistory/querySearchRecord\", {\r\n          \"aamid\": this.$store.state.userInfoObj.aamid,\r\n          // aamid: \"010203\"\r\n        })\r\n        .then(res => {\r\n          if (res.status === 200 && res.data.status === \"000000\") {\r\n            const resData = res.data.data || [];\r\n            this.searchHistoryList = [...resData];\r\n          }\r\n        });\r\n    },\r\n    // 获取热门推荐\r\n    getHot() {\r\n      this.$axios\r\n        .post(\"/hopeSearchHistory_h/queryHotSearch\", {\r\n          \"aamid\": this.$store.state.userInfoObj.aamid,\r\n          // aamid: \"010203\"\r\n        })\r\n        .then(res => {\r\n          if (res.status === 200 && res.data.status === \"000000\") {\r\n            const resData = res.data.data || [];\r\n            this.searchHotList = [...resData];\r\n          }\r\n        });\r\n    },\r\n    hideHistory() {\r\n      const searchArr = this.searchHistoryList.map(i => i.searchtext);\r\n      this.$axios\r\n        .post(\"/hopeSearchHistory/delSearchRecord\", {\r\n          \"aamid\": this.$store.state.userInfoObj.aamid,\r\n          // aamid: \"010203\",\r\n          searchArr\r\n        })\r\n        .then(res => {\r\n          if (res.status === 200 && res.data.status === \"000000\") {\r\n            isHistoryShow = false;\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.search {\r\n  min-height: 100%;\r\n  background: #fff;\r\n}\r\n.apply-dialog{\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 999;\r\n  .dialog{\r\n    width: 3.4rem;\r\n    position: absolute;\r\n    top: 20%;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    .input{\r\n      height: 1.9rem;\r\n      padding: 0.12rem 0.15rem;\r\n      position: relative;\r\n      background: #fff;\r\n      border: 1px solid #E0E0E0;\r\n      border-radius: 4px;\r\n      textarea{\r\n        width: 100%;\r\n        font-size: 0.15rem;\r\n        color: #969696;\r\n      }\r\n      span{\r\n        position: absolute;\r\n        font-size: 12px;\r\n        color: #A6A6A6;\r\n        right: 0.1rem;\r\n        bottom: 0.1rem;\r\n      }\r\n    }\r\n    .btn{\r\n      background-image: linear-gradient(270deg, #45A4B1 0%, #2A7875 100%);\r\n      border-radius: 4px;\r\n      height: 0.44rem;\r\n      line-height: 0.44rem;\r\n      text-align: center;\r\n      font-size: 0.17rem;\r\n      color: #FFFFFF;\r\n      margin: 0.2rem 0 0.35rem;\r\n    }\r\n    .close{\r\n      width: 0.7rem;\r\n      height: 0.7rem;\r\n      background: url('../../assets/images/btn_close@2x.png') no-repeat;\r\n      background-size: 0.7rem 0.7rem;\r\n      margin: 0 auto;\r\n    }\r\n  }\r\n}\r\n.search-btn{\r\n  width: 0.52rem;\r\n  height: 0.3rem;\r\n  background: #45A4B1;\r\n  border-radius: 0.15rem;\r\n  color: #fff;\r\n  text-align: center;\r\n  line-height: 0.3rem;\r\n  font-size: 0.15rem;\r\n  margin-left: 0.06rem;\r\n}\r\n.content {\r\n  .search-list {\r\n    .loading {\r\n      padding-top: 1.2rem;\r\n      text-align: center;\r\n      font-size: 0.14rem;\r\n      color: #666666;\r\n      img {\r\n        width: 0.4rem;\r\n      }\r\n    }\r\n    .empty {\r\n      padding-top: 1.2rem;\r\n      text-align: center;\r\n      font-size: 0.14rem;\r\n      color: #666666;\r\n    }\r\n    li {\r\n      height: 0.44rem;\r\n      line-height: 0.44rem;\r\n      font-size: 0.15rem;\r\n      color: #232323;\r\n      border-bottom: 1px solid #eaeaea;\r\n      box-sizing: border-box;\r\n      padding: 0 0.1rem 0 0.17rem;\r\n      display: flex;\r\n      align-items: center;\r\n      position: relative;\r\n      overflow: hidden;\r\n      .left{\r\n        flex: 1;\r\n        display: flex;\r\n        align-items: center;\r\n        overflow: hidden;\r\n        height: 0.44rem;\r\n        .text{\r\n          height: 0.44rem;\r\n          overflow: hidden;\r\n          text-overflow:ellipsis;\r\n          white-space: nowrap;\r\n          // max-width: calc(100% - 0.6rem);\r\n          padding-right: 0.09rem;\r\n          box-sizing: border-box;\r\n        }\r\n      }\r\n      img{\r\n        width: 0.3rem;\r\n        height: 0.3rem;\r\n        margin-left: 0.1rem;\r\n      }\r\n      .auth{\r\n        float: right;\r\n        font-size: 0.12rem;\r\n        color: #969696;\r\n      }\r\n      .key-icon{\r\n        display: inline-block;\r\n        width: 0.5rem;\r\n        height: 0.16rem;\r\n        border: 1px solid #45A4B1;\r\n        border-radius: 0.08rem;\r\n        font-size: 0.12rem;\r\n        color: #45A4B1;\r\n        line-height: 0.16rem;\r\n        text-align: center;\r\n        white-space: nowrap;\r\n      }\r\n    }\r\n  }\r\n  .search-result{\r\n    h5{\r\n      height: 0.4rem;\r\n      font-size: 0.14rem;\r\n      color: #969696;\r\n      line-height: 0.4rem;\r\n      position: relative;\r\n      text-indent: 0.16rem;\r\n      border-bottom: 1px solid #EAEAEA;\r\n      i{\r\n        position: absolute;\r\n        width: 0.04rem;\r\n        height: 0.24rem;\r\n        background: #2A7875;\r\n        left: 0;\r\n        top: 0.08rem;\r\n      }\r\n    }\r\n  }\r\n  .more{\r\n    height: 0.16rem;\r\n    padding-top: 0.1rem;\r\n    font-size: 0.11rem;\r\n    color: #45A4B1;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    img{\r\n      width: 0.12rem;\r\n      height: 0.13rem;\r\n      margin-left: 0.02rem;\r\n    }\r\n    .roate{\r\n      transform: rotate(180deg);\r\n    }\r\n  }\r\n  .history-hot {\r\n    padding: 0.1rem 0.16rem 0 0.16rem;\r\n    h4 {\r\n      font-size: 0.14rem;\r\n      height: 0.2rem;\r\n      line-height: 0.2rem;\r\n      color: #232323;\r\n      margin-bottom: 0.12rem;\r\n    }\r\n    ul {\r\n      overflow: hidden;\r\n      li {\r\n        font-size: 0.13rem;\r\n        color: #666666;\r\n        padding: 0.06rem 0.15rem;\r\n        background: #f1f1f1;\r\n        border-radius: 0.15rem;\r\n        float: left;\r\n        margin-right: 0.06rem;\r\n        margin-bottom: 0.06rem;\r\n      }\r\n    }\r\n    .history {\r\n      position: relative;\r\n      margin-bottom: 0.18rem;\r\n      .delete-btn {\r\n        position: absolute;\r\n        width: 0.22rem;\r\n        height: 0.22rem;\r\n        display: block;\r\n        top: -0.02rem;\r\n        right: -0.04rem;\r\n        background: url(\"../../assets/images/icon_delete@2x.png\") no-repeat center\r\n          center;\r\n        background-size: 0.22rem 0.22rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=6f59b618&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=6f59b618&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f59b618\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}