(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56e43f8a"],{"06c5":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("a630"),s("fb6a"),s("b0c0"),s("d3b7"),s("25f0"),s("3ca3");var a=s("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Object(a["a"])(t,e):void 0}}},2909:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var a=s("6b75");function i(t){if(Array.isArray(t))return Object(a["a"])(t)}s("a4d3"),s("e01a"),s("d28b"),s("a630"),s("e260"),s("d3b7"),s("3ca3"),s("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=s("06c5");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||r(t)||Object(o["a"])(t)||n()}},"4df4":function(t,e,s){"use strict";var a=s("0366"),i=s("7b0b"),r=s("9bdd"),o=s("e95a"),n=s("50c4"),c=s("8418"),l=s("35a1");t.exports=function(t){var e,s,h,u,d,p,m=i(t),v="function"==typeof this?this:Array,w=arguments.length,y=w>1?arguments[1]:void 0,f=void 0!==y,g=l(m),A=0;if(f&&(y=a(y,w>2?arguments[2]:void 0,2)),void 0==g||v==Array&&o(g))for(e=n(m.length),s=new v(e);e>A;A++)p=f?y(m[A],A):m[A],c(s,A,p);else for(u=g.call(m),d=u.next,s=new v;!(h=d.call(u)).done;A++)p=f?r(u,y,[h.value,A],!0):h.value,c(s,A,p);return s.length=A,s}},"6b75":function(t,e,s){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}s.d(e,"a",(function(){return a}))},9603:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAaCAYAAACtv5zzAAAAAXNSR0IArs4c6QAAAPtJREFUSA3tk0EKwjAQRWeql/A0gmDBhT1APIDUhR7AtQdQUPEA5gB1IVQQvJd2zLRNCbW2CeIugRKYzH9/+EkB/PIJ+AT+ngBqh4lMhk8iiYibVEQHXXfZQ5ksiGjdRxRXET1YG2jAC6AHgAPKaB+eL0tdt91Zw1pmFKxCWRmoqe+AEAOiGiLbupjkcKVhLTNyVjlZFZGedCyTORAcgUilFazS2XSnz5r2OvwmopPZ92HAh7YmXXBmNRrYmNjAWw3aTGzhnQZNJlzjR6AvtJ45n5vra0Rmk3kneb18LV1w7rUy4MbKpFDFNnBudVrqTx3x5yTyzT6BnxN4Az8ok4PeohipAAAAAElFTkSuQmCC"},a630:function(t,e,s){var a=s("23e7"),i=s("4df4"),r=s("1c7e"),o=!r((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:o},{from:i})},b8fb:function(t,e,s){"use strict";var a=s("f5e2"),i=s.n(a);i.a},cb80:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isDialogShow,expression:"isDialogShow"}],staticClass:"apply-dialog"},[a("div",{staticClass:"dialog"},[a("div",{staticClass:"input"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.applyVal,expression:"applyVal"}],attrs:{maxlength:"30",placeholder:"如申请开通视图权限，请输入开通理由"},domProps:{value:t.applyVal},on:{input:function(e){e.target.composing||(t.applyVal=e.target.value)}}}),a("span",[t._v("30字以内")])]),a("div",{staticClass:"btn",on:{click:t.submitApply}},[t._v("提交")]),a("div",{staticClass:"close",on:{click:function(e){t.isDialogShow=!1}}})])]),a("SearchBar",{on:{searchVal:t.searchVal,keyboardSearch:t.keyboardSearch}},[a("div",{staticClass:"search-btn",on:{click:t.toSearchResultPage}},[t._v("搜索")])]),a("div",{staticClass:"content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.inputVal.length>0,expression:"inputVal.length > 0"}],staticClass:"search-list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoadingShow,expression:"isLoadingShow"}],staticClass:"loading"},[a("img",{attrs:{src:s("12ae"),alt:""}}),a("p",[t._v("搜索中...")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isEmptyShow&&0===t.searchViewResultList.length,expression:"isEmptyShow && searchViewResultList.length === 0"}],staticClass:"empty"},[t._v("搜索结果为空")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoadingShow,expression:"!isLoadingShow"}],staticClass:"search-result"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.searchViewResultList.length,expression:"searchViewResultList.length"}],staticClass:"view"},[t._m(0),a("ul",t._l(t.searchViewResultList,(function(e,s){return a("li",{key:s,on:{click:function(e){return t.toLink(t.searchViewResultList[s],"view")}}},[a("span",{staticClass:"left"},[a("span",{staticClass:"text",domProps:{innerHTML:t._s(e.text)}}),a("img",{directives:[{name:"show",rawName:"v-show",value:"keyWord"!==e.type,expression:"item.type !== 'keyWord'"}],attrs:{src:e.icon,alt:""}})]),a("span",{staticClass:"auth"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"keyWord"===e.type,expression:"item.type === 'keyWord'"}],staticClass:"key-icon"},[t._v("关键字")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.quanxianC,expression:"item.quanxianC === 0"}]},[t._v(" {无权限}")])])])})),0),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.searchMoreViewResultList.length&&t.isShowMore,expression:"searchMoreViewResultList.length && isShowMore"}]},t._l(t.searchMoreViewResultList,(function(e,s){return a("li",{key:s,on:{click:function(e){return t.toLink(t.searchMoreViewResultList[s],"view")}}},[a("span",{staticClass:"left"},[a("span",{staticClass:"text",domProps:{innerHTML:t._s(e.text)}}),a("img",{directives:[{name:"show",rawName:"v-show",value:"keyWord"!==e.type,expression:"item.type !== 'keyWord'"}],attrs:{src:e.icon,alt:""}})]),a("span",{staticClass:"auth"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"keyWord"===e.type,expression:"item.type === 'keyWord'"}],staticClass:"key-icon"},[t._v("关键字")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0===e.quanxianC,expression:"item.quanxianC === 0"}]},[t._v(" {无权限}")])])])})),0)]),t.searchMoreViewResultList.length?a("div",{staticClass:"more",on:{click:t.showMore}},[t._v(" "+t._s(t.isShowMore?"收起":"更多")+" "),a("img",{class:[t.isShowMore?"roate":""],attrs:{src:s("9603"),alt:""}})]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.searchArticleResultList.length,expression:"searchArticleResultList.length"}],staticClass:"article"},[t._m(1),a("ul",t._l(t.searchArticleResultList,(function(e,s){return a("li",{key:s,on:{click:function(e){return t.toLink(t.searchArticleResultList[s],"article")}}},[a("span",{staticClass:"left"},[a("span",{staticClass:"text",domProps:{innerHTML:t._s(e.text)}})]),a("span",{staticClass:"auth"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"keyWord"===e.type,expression:"item.type === 'keyWord'"}],staticClass:"key-icon"},[t._v("关键字")])])])})),0)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.inputVal.length,expression:"inputVal.length === 0"}],staticClass:"history-hot"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isHistoryShow&&t.searchHistoryList.length,expression:"isHistoryShow && searchHistoryList.length"}],staticClass:"history"},[a("span",{staticClass:"delete-btn",on:{click:t.hideHistory}}),a("h4",[t._v("历史搜索")]),a("ul",t._l(t.searchHistoryList,(function(e,s){return a("li",{key:s,on:{click:function(s){return t.clickToResult(e.searchtext)}}},[t._v(t._s(e.searchtext))])})),0)]),a("div",{staticClass:"hot"},[a("h4",[t._v("热门搜索")]),a("ul",t._l(t.searchHotList,(function(e,s){return a("li",{key:s,on:{click:function(s){return t.clickToResult(e.searchtext)}}},[t._v(t._s(e.searchtext))])})),0)])])])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h5",[s("i"),t._v("相关视图")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h5",[s("i"),t._v("相关文章")])}],r=(s("99af"),s("4160"),s("d81d"),s("fb6a"),s("d3b7"),s("4d63"),s("ac1f"),s("25f0"),s("5319"),s("498a"),s("159b"),s("2909")),o=(s("e7e5"),s("d399")),n=s("5530"),c=s("14ac"),l={name:"Search",components:{SearchBar:c["a"]},data:function(){return{inputVal:"",applyVal:"",applyModuleId:void 0,isDialogShow:!1,isLoadingShow:!1,isEmptyShow:!1,isHistoryShow:!0,isShowMore:!1,searchViewResultList:[],searchMoreViewResultList:[],searchArticleResultList:[],searchHistoryList:[],searchHotList:[]}},created:function(){},mounted:function(){this.getHistory(),this.getHot()},methods:{searchVal:function(t){var e=this;if(this.inputVal=t,this.searchViewResultList=[],this.inputVal){this.isLoadingShow=!0,this.isEmptyShow=!1;var s=new RegExp(this.inputVal,"g");this.$axios.post("/hopeModule/searchModuleByName",{name:this.inputVal,aamid:this.$store.state.userInfoObj.aamid,deptid:this.$store.state.userInfoObj.deptid,odeptid:this.$store.state.userInfoObj.odeptid}).then((function(t){if(e.isLoadingShow=!1,200===t.status&&"000000"===t.data.status){var a=t.data.data||[],i=a.module.list[1].styleList||[],r=a.module.list[0].styleList||[],o=a.article.list[1].styleList||[],c=a.article.list[0].styleList||[];i.forEach((function(t){t.type="keyWord"})),o.forEach((function(t){t.type="keyWord"}));var l=r.slice(0,3).concat(i.slice(0,3)),h=c.concat(o),u=i.slice(3).concat(r.slice(3));if(0===i.length&&0===r.length&&0===o.length&&0===c.length)return void(e.isEmptyShow=!0);e.searchViewResultList=l.map((function(t){return Object(n["a"])({text:t.type&&"keyWord"===t.type?t.keyname.replace(s,"<span style='color: #45A4B1;'>"+e.inputVal+"</span>"):t.modulename.replace(s,"<span style='color: #45A4B1;'>"+e.inputVal+"</span>")},t)})),e.searchMoreViewResultList=u.map((function(t){return Object(n["a"])({text:t.type&&"keyWord"===t.type?t.keyname.replace(s,"<span style='color: #45A4B1;'>"+e.inputVal+"</span>"):t.modulename.replace(s,"<span style='color: #45A4B1;'>"+e.inputVal+"</span>")},t)})),e.searchArticleResultList=h.map((function(t){return Object(n["a"])({text:t.textname.replace(s,"<span style='color: #45A4B1;'>"+e.inputVal+"</span>")},t)}))}else e.isEmptyShow=!0})).catch((function(t){e.isLoadingShow=!1,e.isEmptyShow=!0}))}},showMore:function(){this.isShowMore=!this.isShowMore},toSearchResultPage:function(){this.inputVal&&this.$router.push({name:"SearchResult",query:{value:this.inputVal}})},keyboardSearch:function(){this.toSearchResultPage()},clickToResult:function(t){this.$router.push({name:"SearchResult",query:{value:t}})},gatherHistory:function(t){var e=this;return new Promise((function(s,a){e.$axios.post("/hopeSearchHistory/insertSearchRecord",{aamid:e.$store.state.userInfoObj.aamid,searchtext:t,logtime:new Date}).then((function(t){200===t.status&&"000000"===t.data.status?s():a()})).catch((function(t){a()}))}))},toLink:function(t,e){var s=this,a="view"===e?t.url:t.textpath;if(0===t.quanxianC)return this.applyModuleId=t.moduleid,void(this.isDialogShow=!0);if("keyWord"!==t.type)this.gatherHistory(t.modulename).then((function(){window.location.href=a})).catch((function(){window.location.href=a}));else{var i="article"===e?t.textname:t.modulename;this.gatherHistory(i).then((function(){s.$router.push({name:"SearchResult",query:{value:i,isArticle:"article"===e}})})).catch((function(){s.$router.push({name:"SearchResult",query:{value:i,isArticle:"article"===e}})}))}},submitApply:function(){var t=this,e=this.applyVal.trim();e?(o["a"].loading({message:"请稍后...",forbidClick:!0}),this.$axios.post("/hopeUserApply/insertHopeUserApply",{aamid:this.$store.state.userInfoObj.aamid,moduleid:this.applyModuleId,logtime:new Date,message:e}).then((function(e){o["a"].clear(),200===e.status&&"000000"===e.data.status&&(t.isDialogShow=!1,t.applyVal="",o["a"].success("申请已送达"))})).catch((function(){o["a"].clear(),o["a"].fail("请重试")}))):o["a"].fail("请输入开通理由")},getHistory:function(){var t=this;this.$axios.post("/hopeSearchHistory/querySearchRecord",{aamid:this.$store.state.userInfoObj.aamid}).then((function(e){if(200===e.status&&"000000"===e.data.status){var s=e.data.data||[];t.searchHistoryList=Object(r["a"])(s)}}))},getHot:function(){var t=this;this.$axios.post("/hopeSearchHistory_h/queryHotSearch",{aamid:this.$store.state.userInfoObj.aamid}).then((function(e){if(200===e.status&&"000000"===e.data.status){var s=e.data.data||[];t.searchHotList=Object(r["a"])(s)}}))},hideHistory:function(){var t=this.searchHistoryList.map((function(t){return t.searchtext}));this.isHistoryShow=!1,this.$axios.post("/hopeSearchHistory/delSearchRecord",{aamid:this.$store.state.userInfoObj.aamid,searchArr:t})}}},h=l,u=(s("b8fb"),s("2877")),d=Object(u["a"])(h,a,i,!1,null,"2b6d7c05",null);e["default"]=d.exports},f5e2:function(t,e,s){}}]);
//# sourceMappingURL=chunk-56e43f8a.f1629c3d.js.map