(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da8cc71e"],{"230f":function(t,e,s){"use strict";var i=s("b0fd"),a=s.n(i);a.a},ac7b:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-concerns"},[s("div",{staticClass:"top-fixed"},[s("div",{staticClass:"back",on:{click:t.back}}),s("div",{staticClass:"search",on:{click:t.searchClick}}),s("span",{staticClass:"edit-btn",on:{click:t.editHandle}},[t._v("编辑")])]),s("div",{staticClass:"content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.cloneData.img,expression:"cloneData.img"}],staticClass:"clone",class:[t.isTreans?"opacity0":""],style:{left:t.cloneData.left+"px",top:t.cloneData.top+"px",transform:t.isTreans?"translate3d("+t.cloneData.transX+"px, "+t.cloneData.transY+"px, 0)":""}},[s("img",{attrs:{src:t.cloneData.img,alt:""}}),s("h5",[t._v(t._s(t.cloneData.title))])]),s("section",[s("h4",[t._v("我的关注")]),s("ul",{staticClass:"myapp-list",staticStyle:{"border-bottom":"1px solid #EAEAEA"}},[s("vuedraggable",t._b({attrs:{delay:100},model:{value:t.myAppList,callback:function(e){t.myAppList=e},expression:"myAppList"}},"vuedraggable",t.dragOptions,!1),[s("transition-group",{attrs:{type:"transition"}},t._l(t.myAppList,(function(e,i){return s("li",{key:i,class:[t.isCanEdit?"showBorder":"",t.delIndex===i?"trans":"","myapp-item"],on:{click:function(s){return t.toViewDetail(e.url)}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.isCanEdit,expression:"isCanEdit"}],staticClass:"add-btn",on:{click:function(e){return e.stopPropagation(),t.delApp(i)}}}),s("img",{attrs:{src:e.icon,alt:""}}),s("h5",[t._v(t._s(e.modulename))])])})),0)],1)],1)]),s("section",[s("h4",[t._v("更多应用")]),s("ul",{staticClass:"more-list"},[s("vuedraggable",t._b({attrs:{sort:!1,handle:".del-btn"},model:{value:t.moreAppList,callback:function(e){t.moreAppList=e},expression:"moreAppList"}},"vuedraggable",t.dragOptions,!1),[s("transition-group",{attrs:{type:"transition"}},t._l(t.moreAppList,(function(e,i){return s("li",{key:i,class:[t.isCanEdit?"showBorder":"",i>3?"margin":"",t.addIndex===i?"trans":""],on:{click:function(s){return t.toViewDetail(e.url)}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.isCanEdit,expression:"isCanEdit"}],staticClass:"del-btn",on:{click:function(e){return e.stopPropagation(),t.addApp(i,e)}}}),s("img",{attrs:{src:e.icon,alt:""}}),s("h5",[t._v(t._s(e.modulename))])])})),0)],1)],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isCanEdit,expression:"isCanEdit"}],staticClass:"handle-bar"},[s("div",{staticClass:"cancel btn",on:{click:function(e){t.isCanEdit=!1}}},[t._v("取消")]),s("div",{staticClass:"done btn",on:{click:t.complete}},[t._v("完成")])])])},a=[],n=(s("fe59"),s("2eeb"),s("ea69"),s("08ba"),s("5172"),s("0a68")),o=s("b07e"),c=s.n(o),r=s("14ac"),l=document.documentElement.getBoundingClientRect().width/3.75,d={name:"MyConcerns",components:{vuedraggable:c.a,SearchBar:r["a"]},data:function(){return{inputVal:"",delIndex:-1,addIndex:-1,isTreans:!1,isCanEdit:!1,myAppList:[],moreAppList:[],cloneData:{}}},mounted:function(){this.getList()},computed:{dragOptions:function(){return{animation:300,group:"description",ghostClass:"ghost"}}},methods:{back:function(){this.$router.go(-1)},editHandle:function(){0===this.moreAppList.length&&0===this.myAppList.length||(this.isCanEdit=!0)},searchClick:function(){var t=this.myAppList.map((function(t){return t.moduleid}));this.$router.push({name:"MyConcernsSearch",params:{selectId:t,allList:this.originList}})},getList:function(){var t=this;this.$axios.post("/hopeModule/queryModuleSub",{aamid:this.$store.state.userInfoObj.aamid,deptid:this.$store.state.userInfoObj.deptid,odeptid:this.$store.state.userInfoObj.odeptid}).then((function(e){if(200===e.status&&"000000"===e.data.status){var s=e.data.data||[],i=[],a=[];s.forEach((function(t){"01"===t.wstatus?i.push(t):a.push(t)})),t.moreAppList=a,t.myAppList=i.sort((function(t,e){return e.sequence-t.sequence})),t.originList=s}})).catch((function(t){}))},addApp:function(t,e){var s=this,i=e.currentTarget.parentNode,a=this.myAppList.length>0?document.querySelectorAll(".myapp-item")[this.myAppList.length-1]:void 0,n=this.moreAppList[t],o=e.currentTarget.parentNode.getBoundingClientRect(),c=this.myAppList.length%4===0,r=a?c?0:a.offsetLeft+o.width-1:0,d=a?c?a.offsetTop+o.height-1:a.offsetTop:.9*l;this.addIndex=t,this.cloneData={img:n.icon,title:n.title,left:i.offsetLeft,top:i.offsetTop,transX:r-i.offsetLeft,transY:d-i.offsetTop},setTimeout((function(){s.isTreans=!0})),setTimeout((function(){s.addIndex=-1,s.moreAppList.splice(t,1),s.myAppList.push(n),setTimeout((function(){s.cloneData={},s.isTreans=!1}),400)}),400)},delApp:function(t){var e=this;this.delIndex=t;var s=this.myAppList[t];setTimeout((function(){e.delIndex=-1,e.myAppList.splice(t,1),e.moreAppList.push(s)}),300)},toViewDetail:function(t){t&&(window.location.href=t)},complete:function(){var t=this,e=this.myAppList.map((function(t){return t.moduleid}));this.$axios.post("/hopeModule/editModuleSubV2",{aamid:this.$store.state.userInfoObj.aamid,addModules:e}).then((function(e){200===e.status&&"000000"===e.data.status?(n["a"].success("编辑成功"),t.isCanEdit=!1):n["a"].fail("请重试")})).catch((function(t){n["a"].fail("请重试")}))}}},p=d,u=(s("230f"),s("9ca4")),m=Object(u["a"])(p,i,a,!1,null,"5acfd2a8",null);e["default"]=m.exports},b0fd:function(t,e,s){}}]);
//# sourceMappingURL=chunk-da8cc71e.d1c2d627.js.map